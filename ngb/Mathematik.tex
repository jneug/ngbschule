
% Mathe-Pakete
\RequirePackage{amsmath,amssymb,amstext,amscd}
\RequirePackage{exscale}
\RequirePackage{tikz}

\usetikzlibrary{shapes}
%\usetikzlibrary{calc}

%\RequirePackage{tkz-euclide}
%\usetkzobj{all}


% Schnell-Kommandos fÃ¼r Mengenzeichen und andere Symbole
\newcommand{\A}{\mathbb{A}}
\newcommand{\B}{\mathbb{B}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\D}{\mathbb{D}}
\newcommand{\E}{\mathbb{E}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\G}{\mathbb{G}}
\newcommand{\K}{\mathbb{K}}
\newcommand{\N}{\mathbb{N}}
\renewcommand{\P}{\mathbb{P}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\cA}{\mathcal{A}}
\newcommand{\cB}{\mathcal{B}}
\newcommand{\cG}{\mathcal{G}}
\newcommand{\cL}{\mathcal{L}}
\newcommand{\cX}{\mathcal{X}}
\newcommand{\cY}{\mathcal{Y}}
\newcommand{\cZ}{\mathcal{Z}}
\newcommand{\bs}{\,\backslash\,}
\newcommand{\qed}{\ensuremath{\Box}}

\def\geogrid{5mm}
\def\geogridcolor{gray!50}
\def\geoaxiscolor{black}
\def\georeset{
\renewcommand{\geogrid}{5mm}
\renewcommand{\geogridcolor}{gray!50}
\renewcommand{\geoaxiscolor}{black}
}

\newenvironment{koordinatensystem}[5][1cm]{%
	\begin{tikzpicture}[cross/.style={draw, cross out, 
		minimum size=2mm, inner sep=0pt, outer sep=0pt,thick}, x=#1, y=#1, smooth,
		>=latex]
	% Setup tkz-euclide
%	\tkzInit[xmin=-1,xmax=13,ymin=-1,ymax=13]
%	\tkzClip
	% Todo: Define offset
	% test dimensions
	\newboolean{ngbXzero}
	\newboolean{ngbYzero}
	\ifthenelse{\(\(#2<0 \OR #2=0\) \AND \(#3>0 \OR #3=0\)\)}
		{\setboolean{ngbXzero}{true}}
		{\setboolean{ngbXzero}{false}}
	\ifthenelse{\(\(#4<0 \OR #4=0\) \AND \(#5>0 \OR #5=0\)\)}
		{\setboolean{ngbYzero}{true}}
		{\setboolean{ngbYzero}{false}}
	%Raster zeichnen
	\draw [color=\geogridcolor]  [step=\geogrid] ({#2-1},{#4-1}) grid ({#3+1},{#5+1});
	% Achsen zeichnen beschriften
	\ifthenelse{\boolean{ngbYzero}}
		{\draw[\geoaxiscolor,->,thick] ({#2-.5},0) -- ({#3+.5},0) node[right] {$x$};
		\ifthenelse{#2<0}{%
			\foreach \x in {#2,...,-1}
			\draw (\x,-.1) -- (\x,.1) node[below=4pt,text=\geoaxiscolor] {$\scriptstyle\x$};
		}{}
		\ifthenelse{#3>0}{%
			\foreach \x in {1,...,#3}
			\draw[text=\geoaxiscolor] (\x,-.1) -- (\x,.1) node[below=4pt,text=\geoaxiscolor] {$\scriptstyle\x$};
		}{}}{}
	\ifthenelse{\boolean{ngbXzero}}
		{\draw[\geoaxiscolor,->,thick] (0,{#4-.5}) -- (0,{#5+.5}) node[above] {$y$};
		\ifthenelse{#4<0}{%
			\foreach \y in {#4,...,-1}
			\draw[text=\geoaxiscolor] (-.1,\y) -- (.1,\y) node[left=4pt,text=\geoaxiscolor] {$\scriptstyle\y$};
		}{}
		\ifthenelse{#5>0}{%
			\foreach \y in {1,...,#5}
			\draw (-.1,\y) -- (.1,\y) node[left=4pt,text=\geoaxiscolor] {$\scriptstyle\y$};
		}{}}{}
	% Ursprung
	\ifthenelse{\boolean{ngbXzero} \OR \boolean{ngbYzero}}{%
		\node[below left]{$\scriptstyle0$};
	}{}
}{\end{tikzpicture}}

\newenvironment{koordinatensystemNO}[3][1cm]{\begin{koordinatensystem}[#1]{0}{#2}{0}{#3}}{\end{koordinatensystem}}

\newenvironment{koordinatensystemN}[4][1cm]{\begin{koordinatensystem}[#1]{#2}{#3}{0}{#4}}{\end{koordinatensystem}}


\newenvironment{zahlenstrahl}[3][1cm]{%
	\begin{tikzpicture}[cross/.style={draw, cross out, 
		minimum size=2mm, inner sep=0pt, outer sep=0pt,thick},
		x=#1, y=#1, smooth, >=latex]
}{\end{tikzpicture}}

\newcommand{\geotext}[3][above]{\node [label={#1:#3}] at (#2) {} }
\newcommand{\geopunkt}[3][above right]{\node at (#2) [cross,label={#1:#3}] (#3) {} }
%\newcommand{\geopunkt}[2]{\tkzDefPoint(#1){#2}}

\newcommand{\geolinie}[3][]{\draw[-,thick,#1] (#2) -- (#3)}
\newcommand{\geostrecke}[3][]{\draw[-,thick,#1] (#2) node[cross] {} -- (#3) node[cross] {}}
\newcommand{\geovektor}[4][]{\draw[->,thick,#1] (#2) -- node [above] {$\vec{#4}$} (#3)}

\newcommand{\geogerade}[3][]{%
	\path (#2) -- (#3) coordinate[pos=-10](aa) coordinate[pos=20](bb);
	\begin{scope}
		\clip (current bounding box.south west) rectangle
		(current bounding box.north east);
		\draw[-,thick,#1] (aa) -- (bb);
	\end{scope}}


\newcommand{\geovektor}[4][]{\draw[->,thick,#1] (#2) -- node [above] {$\vec{#4}$} (#3)}